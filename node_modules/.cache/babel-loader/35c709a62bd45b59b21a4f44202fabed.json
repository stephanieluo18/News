{"ast":null,"code":"import _regeneratorRuntime from\"/Users/stephanieluo/Desktop/News/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/stephanieluo/Desktop/News/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/stephanieluo/Desktop/News/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Axios from\"axios\";import{v4 as uuidv4}from\"uuid\";import\"./normalize.css\";import\"./skeleton.css\";import\"./App.css\";import Alert from\"./Components/Alert.js\";import Select from\"react-select\";import Article from\"./Components/Article.js\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),articles=_useState4[0],setArticles=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),alert=_useState6[0],setAlert=_useState6[1];var _useState7=useState({value:\"general\",label:\"General\"}),_useState8=_slicedToArray(_useState7,2),dropdown=_useState8[0],setDropdown=_useState8[1];var ids=[];var labels=[{value:\"general\",label:\"General\"},{value:\"business\",label:\"Business\"},{value:\"entertainment\",label:\"Entertainment\"},{value:\"sports\",label:\"Sports\"}];var _useState9=useState({value:\"publishedAt\",label:\"Most Recent\"}),_useState10=_slicedToArray(_useState9,2),sort=_useState10[0],setSort=_useState10[1];var dates=[{value:\"publishedAt\",label:\"Most Recent\"},{value:\"relevancy\",label:\"Most Relevant\"},{value:\"popularity\",label:\"Most Popular\"}];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var source,response,data,i,x,url,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/* source url determines the possible related ids based on category */source=\"https://newsapi.org/v2/sources?category=\".concat(dropdown.value,\"&apiKey=26d35504515e414c888efe04f5ba33e6\");_context.next=3;return fetch(source);case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;//console.log(data);\n//console.log(data.sources.length); //length of array\n//console.log(data.sources[0].id); // should display id of the first array\n/* fetch all possible ids and add it to sources of the url below */for(i=0;i<data.sources.length;i++){ids.push(data.sources[i].id);// array of the ids\n}/* x is the string representation of the id array */x=\"\";/* sources can take only a max of 20 items so if category is general, there is no need to filter*/dropdown.value===\"general\"?x=\"\":x=ids.toString();/* main source to search for articles */url=\"https://newsapi.org/v2/everything?q=\".concat(query,\"&sources=\").concat(x,\"&sortBy=\").concat(sort.value,\"&pageSize=30&apiKey=26d35504515e414c888efe04f5ba33e6\");/* if user does not enter anything, alert message will show*/if(!(query===\"\")){_context.next=13;break;}return _context.abrupt(\"return\",setAlert(\"Please type in a keyword\"));case 13:_context.next=15;return Axios.get(url);case 15:result=_context.sent;if(!(result.data.totalResults===0)){_context.next=18;break;}return _context.abrupt(\"return\",setAlert(\"No articles found with such name\"));case 18:setArticles(result.data.articles);setAlert(\"\");//setQuery(\"\");\ncase 20:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();/* query */var onChange=function onChange(e){setQuery(e.target.value);};/* when search button is clicked */var onSubmit=function onSubmit(e){e.preventDefault();getData();};/* handles the changes for the different categories */var handleChange=function handleChange(event){setDropdown(event);};/* handles the changes for the different sorting methods */var handleSort=function handleSort(event){setSort(event);};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},/*#__PURE__*/React.createElement(\"h1\",{onClick:getData},\"Worldwide News\")),/*#__PURE__*/React.createElement(\"form\",{className:\"search-bar\",onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"alertStyle\"},alert!==\"\"&&/*#__PURE__*/React.createElement(Alert,{alert:alert})),/*#__PURE__*/React.createElement(\"div\",{className:\"inline\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Search News\",autoComplete:\"off\",onChange:onChange,value:query})),/*#__PURE__*/React.createElement(\"div\",{className:\"inline\"},/*#__PURE__*/React.createElement(Select,{value:dropdown,options:labels,onChange:handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"inline\"},/*#__PURE__*/React.createElement(Select,{value:sort,options:dates,onChange:handleSort})),/*#__PURE__*/React.createElement(\"div\",{className:\"inline\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Search\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"articles\"},articles!=[]&&articles.map(function(article){return/*#__PURE__*/React.createElement(Article,{key:uuidv4(),article:article});})));}export default App;","map":{"version":3,"sources":["/Users/stephanieluo/Desktop/News/src/App.js"],"names":["React","useState","Axios","v4","uuidv4","Alert","Select","Article","App","query","setQuery","articles","setArticles","alert","setAlert","value","label","dropdown","setDropdown","ids","labels","sort","setSort","dates","getData","source","fetch","response","json","data","i","sources","length","push","id","x","toString","url","get","result","totalResults","onChange","e","target","onSubmit","preventDefault","handleChange","event","handleSort","map","article"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Axios from \"axios\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport \"./normalize.css\";\nimport \"./skeleton.css\";\nimport \"./App.css\";\nimport Alert from \"./Components/Alert.js\";\nimport Select from \"react-select\";\nimport Article from \"./Components/Article.js\";\n\nfunction App() {\n  const [query, setQuery] = useState(\"\");\n  const [articles, setArticles] = useState(\"\");\n  const [alert, setAlert] = useState(\"\");\n  const [dropdown, setDropdown] = useState({\n    value: \"general\",\n    label: \"General\",\n  });\n  const ids = [];\n\n  const labels = [\n    {\n      value: \"general\",\n      label: \"General\",\n    },\n    {\n      value: \"business\",\n      label: \"Business\",\n    },\n    {\n      value: \"entertainment\",\n      label: \"Entertainment\",\n    },\n    {\n      value: \"sports\",\n      label: \"Sports\",\n    },\n  ];\n\n  const [sort, setSort] = useState({\n    value: \"publishedAt\",\n    label: \"Most Recent\",\n  });\n\n  const dates = [\n    {\n      value: \"publishedAt\",\n      label: \"Most Recent\",\n    },\n    {\n      value: \"relevancy\",\n      label: \"Most Relevant\",\n    },\n    {\n      value: \"popularity\",\n      label: \"Most Popular\",\n    },\n  ];\n\n  const getData = async () => {\n    /* source url determines the possible related ids based on category */\n    const source = `https://newsapi.org/v2/sources?category=${dropdown.value}&apiKey=26d35504515e414c888efe04f5ba33e6`;\n    const response = await fetch(source);\n    const data = await response.json();\n    //console.log(data);\n    //console.log(data.sources.length); //length of array\n    //console.log(data.sources[0].id); // should display id of the first array\n\n    /* fetch all possible ids and add it to sources of the url below */\n    for (let i = 0; i < data.sources.length; i++) {\n      ids.push(data.sources[i].id); // array of the ids\n    }\n\n    /* x is the string representation of the id array */\n    let x = \"\";\n\n    /* sources can take only a max of 20 items so if category is general, there is no need to filter*/\n    dropdown.value === \"general\" ? (x = \"\") : (x = ids.toString());\n\n    /* main source to search for articles */\n    const url = `https://newsapi.org/v2/everything?q=${query}&sources=${x}&sortBy=${sort.value}&pageSize=30&apiKey=26d35504515e414c888efe04f5ba33e6`;\n\n    /* if user does not enter anything, alert message will show*/\n    if (query === \"\") {\n      return setAlert(\"Please type in a keyword\");\n    }\n    const result = await Axios.get(url);\n    //console.log(sources);\n\n    /* if no results show, alert message is displayed */\n    if (result.data.totalResults === 0) {\n      return setAlert(\"No articles found with such name\");\n    }\n    setArticles(result.data.articles);\n    setAlert(\"\");\n    //setQuery(\"\");\n  };\n\n  /* query */\n  const onChange = (e) => {\n    setQuery(e.target.value);\n  };\n\n  /* when search button is clicked */\n  const onSubmit = (e) => {\n    e.preventDefault();\n    getData();\n  };\n\n  /* handles the changes for the different categories */\n  const handleChange = (event) => {\n    setDropdown(event);\n  };\n\n  /* handles the changes for the different sorting methods */\n  const handleSort = (event) => {\n    setSort(event);\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"title\">\n        <h1 onClick={getData}>Worldwide News</h1>\n      </div>\n      <form className=\"search-bar\" onSubmit={onSubmit}>\n        <div className=\"alertStyle\">\n          {alert !== \"\" && <Alert alert={alert} />}\n        </div>\n        <div className=\"inline\">\n          <input\n            type=\"text\"\n            placeholder=\"Search News\"\n            autoComplete=\"off\"\n            onChange={onChange}\n            value={query}\n          />\n        </div>\n        <div className=\"inline\">\n          <Select value={dropdown} options={labels} onChange={handleChange} />\n        </div>\n        <div className=\"inline\">\n          <Select value={sort} options={dates} onChange={handleSort} />\n        </div>\n        <div className=\"inline\">\n          <input type=\"submit\" value=\"Search\" />\n        </div>\n      </form>\n      <div className=\"articles\">\n        {articles != [] &&\n          articles.map((article) => (\n            <Article key={uuidv4()} article={article} />\n          ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}